.. raw:: html

    <code class="vert-shader common-shader">
        attribute vec4 a_vec4_combined;
        varying vec2 v_vec2_texCoords;
        void main() {
            v_vec2_texCoords = a_vec4_combined.zw;
            gl_Position = vec4(a_vec4_combined.xy, 0, 1);
        }
    </code>
    <code class="frag-shader common-shader">
        #extension GL_OES_standard_derivatives : enable
        precision mediump float;
        uniform vec2 u_vec2_mouse;
        varying vec2 v_vec2_texCoords;
        vec4 original_image(vec2 texCoords) {
            return vec4(vec3(
                mod(floor(texCoords.x*10.0)+floor(texCoords.y*10.0), 2.0)
            ), 1);
        }


    </code>

The distortion vector field is computed from the gradient of a scalar "potential" field. This distortion can only move, scale and shear small patches of the image. It can not rotate patches of the image in-place or with translation; Swirl-like effects are impossible to achieve with this technique alone.

.. raw:: html

         <div class="gl-ide gl-operand">
         <canvas class="gl-canvas"></canvas>
         <div class="gl-editor" data-language="glsl">
        #extension GL_OES_standard_derivatives : enable
        precision mediump float;
        uniform vec2 u_vec2_mouse;
        varying vec2 v_vec2_texCoords;
        vec4 original_image(vec2 texCoords) {
            return vec4(vec3(
                mod(floor(texCoords.x*10.0)+floor(texCoords.y*10.0), 2.0)
            ), 1);
        }
         </div>
         </div>

         <div class="gl-ide gl-operator">
         <canvas class="gl-canvas"></canvas>
         <div class="gl-editor" data-language="glsl">
         hello worlds...
         </div>
         </div>

         <div class="gl-ide gl-composition">
         <canvas class="gl-canvas"></canvas>
         <div class="gl-editor" data-language="glsl">
         hello worlds...
         </div>
         </div>


This is also useful for approximating caustics in the paraxial limit (looking along the normal to a surface). Here are some examples of the distortion caused by the wavy surface of a pool of water.

.. raw:: html
         figure and code

         The image as seen overhead above the surface.

.. raw:: html
         figure and code

         Refracted light from a sun overhead as seen below the surface.
